<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="1.css">
</head>
<body>
    <header>
    </header>

    <div class="main-wapper">
        <main id="main">
   <footer></footer>
    <script>
        var keys={
            '0':{'0':'q','1':'w','2':'e','3':'r','4':'t','5':'y','6':'u','7':'i','8':'o','9':'p'},
            '1':{'0':'a','1':'s','2':'d','3':'f','4':'g','5':'h','6':'j','7':'k','8':'l'},
            '2':{'0':'z','1':'x','2':'c','3':'v','4':'b','5':'n','6':'m'} }
        var hash={
            'q':'qq.com','w':'weibo.com','r':'renren.com','s':'mcdonalds.com',
            't':'tieba.baidu.com',
        }
        var localStorageHash=JSON.parse( localStorage.getItem("uuu"))
        if(localStorageHash){
            hash=localStorageHash
        }

        for(var i in keys){
            var div=document.createElement('div')
                main.appendChild(div)
            for(var j in keys[i])
            {
                var kbd=document.createElement('kbd')
                div.appendChild(kbd)

                var span=document.createElement('span')
                span.textContent=keys[i][j]
                kbd.appendChild(span)

                var button=document.createElement('button')
                button.textContent='编辑'
                kbd.appendChild(button)

                var img=document.createElement('img')
                if(hash[keys[i][j]]){
                    img.src='http://www.'+hash[keys[i][j]]+'/favicon.ico'    
                }
                else{
                    img.src='./img/error.png'    
                }

                img.onerror=function(a){
                    img.src='./img/error.png'    
                }
                kbd.appendChild(img)
                

                

                button.onclick=function(aa){
                    ss=prompt()
                    
                    hash[aa['target'].previousSibling.innerText]=ss
                    localStorage.setItem("uuu", JSON.stringify(hash));  
                    console.log(aa['target'].nextSibling.src)
                    var img=aa['target'].nextSibling


                    img.src='http://www.'+ss+'/favicon.ico'    
                    img.onerror=function(a){
                    img.src='./img/error.png'    
                }
                    


                    
                    

                }

            }
        }
        document.onkeypress=function(aaa){
            site='http://www.'+hash[aaa['key']]
            window.open(site)
            
        }
        
    </script>

</body>
    
</body>
</html>